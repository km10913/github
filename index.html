<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>바운스 볼 벽돌깨기</title>
<style>
  html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif}
  body{
    display:flex;
    align-items:center;
    justify-content:center;
    background:#000 url("palmer.webp") center/cover no-repeat fixed;
  }
  .container{
    width:min(960px,94vw);
    height:min(700px,90vh);
    background:rgba(0,0,0,0.55);
    border-radius:16px;
    padding:18px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.7);
    display:grid;
    grid-template-columns: 1fr 260px;
    gap:16px;
  }
  .game-card{
    background:rgba(0,0,0,0.35);
    border-radius:12px;
    padding:12px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  canvas{
    background:rgba(255,255,255,0.08);
    width:100%;height:100%;
    border-radius:8px;display:block;
  }
  .panel{
    background:rgba(0,0,0,0.5);
    border-radius:12px;
    padding:16px;
    display:flex;
    flex-direction:column;
    gap:12px;
    color:#fff;
  }
  h1{font-size:20px;margin:0 0 6px 0;color:#ffeb3b}
  .stat{display:flex;justify-content:space-between;padding:8px;border-radius:8px;background:rgba(255,255,255,0.1)}
  .controls{display:flex;gap:8px;flex-wrap:wrap}
  button{
    border:0;padding:10px 14px;border-radius:10px;
    background:linear-gradient(90deg,#3f51b5,#673ab7);
    color:white;cursor:pointer;font-weight:600;
    transition:transform .12s ease;
  }
  button:active{transform:translateY(2px)}
  button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.4)}
  footer{font-size:12px;color:rgba(230,238,248,0.6);margin-top:auto}
  @media(max-width:900px){.container{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="container">
    <div class="game-card"><canvas id="game"></canvas></div>
    <aside class="panel">
      <h1>바운스 볼</h1>
      <div class="stat"><span>점수</span><strong id="score">0</strong></div>
      <div class="stat"><span>최고점</span><strong id="highScore">0</strong></div>
      <div class="stat"><span>목숨</span><strong id="lives">3</strong></div>
      <div class="stat"><span>레벨</span><strong id="level">1</strong></div>
      <div class="controls">
        <button id="startBtn">시작</button>
        <button id="restartBtn" class="secondary">다시 시작</button>
      </div>
      <footer>← →, A D 또는 마우스로 조작 | Space: 일시정지</footer>
    </aside>
  </div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
let W,H;
function resize(){
  const r=canvas.getBoundingClientRect();
  W=r.width;H=r.height;canvas.width=W;canvas.height=H;
}
resize();window.addEventListener("resize",resize);

let score=0,lives=3,level=1,paused=true;
let highScore=localStorage.getItem("bounceHigh")||0;

const paddle={w:120,h:14,x:0,y:0,speed:20};
const ball={r:9,x:0,y:0,vx:0,vy:0,speed:6,
  reset(){
    this.x=W/2;this.y=H-80;
    const ang=(Math.random()*Math.PI/2)+Math.PI/4;
    const sp=this.speed+level*0.5; // 레벨이 오를수록 속도 증가
    this.vx=sp*Math.cos(ang)*(Math.random()<0.5?-1:1);
    this.vy=-Math.abs(sp*Math.sin(ang));
  }
};

let bricks=[];
const pastelColors=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF"];
function makeBricks(rows=5,cols=8){
  bricks=[];
  const pad=10; const bw=(W-pad*(cols+1))/cols, bh=20;
  const offset=40;
  for(let r=0;r<rows;r++)for(let c=0;c<cols;c++){
    const x=pad+c*(bw+pad),y=offset+r*(bh+pad);
    const color=pastelColors[(r+c)%pastelColors.length];
    bricks.push({x,y,w:bw,h:bh,alive:true,color});
  }
}

function resetGame(){
  score=0;lives=3;level=1;paddle.x=W/2-paddle.w/2;paddle.y=H-50;
  makeBricks();ball.reset();
}

function update(){
  if(paused) return;
  ball.x+=ball.vx; ball.y+=ball.vy;
  if(ball.x-ball.r<0||ball.x+ball.r>W) ball.vx=-ball.vx;
  if(ball.y-ball.r<0) ball.vy=-ball.vy;
  if(ball.y+ball.r>=paddle.y&&ball.x>=paddle.x&&ball.x<=paddle.x+paddle.w&&ball.vy>0){
    const rel=(ball.x-(paddle.x+paddle.w/2))/(paddle.w/2);
    const sp=Math.hypot(ball.vx,ball.vy);
    const ang=rel*(Math.PI/3);
    ball.vx=sp*Math.sin(ang);ball.vy=-Math.abs(sp*Math.cos(ang));
  }
  for(const b of bricks){
    if(!b.alive) continue;
    if(ball.x+ball.r>b.x&&ball.x-ball.r<b.x+b.w&&ball.y+ball.r>b.y&&ball.y-ball.r<b.y+b.h){
      ball.vy=-ball.vy; b.alive=false; score+=10;
    }
  }
  if(ball.y-ball.r>H){
    lives--;ball.reset();
    if(lives<=0){
      paused=true;
      if(score>highScore){highScore=score;localStorage.setItem("bounceHigh",highScore);}
    }
  }
  if(bricks.every(b=>!b.alive)){
    level++;makeBricks();ball.speed+=0.5;ball.reset();
  }
}
function draw(){
  ctx.clearRect(0,0,W,H);
  ctx.fillStyle="rgba(255,255,255,0.05)";
  ctx.fillRect(0,0,W,H);
  ctx.fillStyle="#ffeb3b";ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
  ctx.fillStyle="#03a9f4";ctx.beginPath();ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);ctx.fill();
  for(const b of bricks){
    if(!b.alive) continue;
    ctx.fillStyle=b.color;
    ctx.fillRect(b.x,b.y,b.w,b.h);
  }
}
function loop(){update();draw();requestAnimationFrame(loop);} loop();

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft"||e.key==="a") paddle.x-=paddle.speed;
  if(e.key==="ArrowRight"||e.key==="d") paddle.x+=paddle.speed;
  if(e.code==="Space") paused=!paused;
});
canvas.addEventListener("mousemove",e=>{
  const rect=canvas.getBoundingClientRect();
  const mouseX=e.clientX-rect.left;
  paddle.x=mouseX-paddle.w/2;
  if(paddle.x<0)paddle.x=0;
  if(paddle.x+paddle.w>W)paddle.x=W-paddle.w;
});
document.getElementById("startBtn").onclick=()=>{paused=false;};
document.getElementById("restartBtn").onclick=()=>{resetGame();paused=true;};

setInterval(()=>{
  document.getElementById("score").textContent=score;
  document.getElementById("lives").textContent=lives;
  document.getElementById("highScore").textContent=highScore;
  document.getElementById("level").textContent=level;
},200);

resetGame();
</script>
</body>
</html>